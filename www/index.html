<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/knockout.js"></script>
        <script type="text/javascript" src="js/handlebars.js"></script>
        <script type="text/javascript" src="js/fixture.js"></script>
        <script type="text/javascript" src="js/moment.js"></script>
        <script type="text/javascript" src="js/slider.js"></script>
        <title>Check In</title>
    </head>
    <body ontouchstart="">
	
    	<div id="application">
			<div class="container">
				<div class="page" id="waitpage">
					APP WAIT
				</div>
			</div>
			<div class="container" data-bind="ifnot: authToken">
				<div class="page" id="loginpage" data-bind="fade: !(authRequest.status() == 'requested')">
					<div id="loginarea">
						<div id="loginform">
							<p><input type="text" id="loginbox" data-bind="value: authRequest.login" placeholder="user name" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/></p>
							<p><input type="password" id="passwordbox" data-bind="value: authRequest.password" placeholder="password"/></p>
							<p><button id="loginbutton" data-bind="click: $root.loginClick">Login</button></p>
						</div>
					</div>
				</div>
			</div>
			<div class="container" data-bind="if: authToken">
				<div class="page" id="locations" >
					<div id="recordsarea">
				    	<div id="records" data-bind="foreach: locations">
			        		<div class="locrecord record data" data-bind="css: filterStatus(), click: $root.selectLocation">
								<div class="indicators"></div>
	        					<div class="locname" data-bind="text: name"></div>
			        			<div class="locaddr" data-bind="text: address"></div>
	        					<div class="dist">(<span class="disttext" data-bind="text: distance"></span>)</div>
	        					<div class="ponum" data-bind="if: pos().length == 1">
									<span class="number" data-bind="text: pos()[0].number"></span>
	        					</div>
								<div class="ponum mult" data-bind="if: pos().length > 1">
									(<span class="count" data-bind="text: pos().length"></span> POs)
								</div>
	      						<div class="rtarrow"></div>
	        				</div>
					    </div>
					</div>
					<div class="heading">
				    	<div class="ibar large">
							<div class="left">
								<button class="ibtn left" id="logout" data-bind="click: $root.logout">Logout</button>
							</div>
							<div class="title" id="maintitle">Locations</div>
							<div class="right">
								<button class="ibtnsq" data-bind="click: $root.refreshLocations"><img src="img/svg/refresh.svg"/></button>
							</div>
						</div>
				    	<div class="silverbar">
							<div class="indicators" data-bind="css: $root.overallStatus()"></div>
							<div id="search">
				    			<input id="searchbox" placeholder="search" data-bind="event: {input: $root.locationSearchChange}"/>
				    		</div>
				    	</div>
				    	<div id="sorters">
					    	<div id="sort_by_cust" class="sortbox">sort by customer<div class="arrow"></div></div>
					    	<div id="sort_by_dist" class="sortbox">sort by distance<div class="arrow"></div></div>
					    </div>
				    </div>
				</div>
				<div id="testpage" data-bind="if: authToken">
				</div>
			</div>
    		
    	</div>
    	
    	<script id="screen_login" type="text/x-page">
    	</script>
    	
    	
    	<script id="hold" type="text/x-page">
			<div id="loginarea" class="step0">
				<div id="loginlogo"></div>
				<div id="loginspinner">
					<div id="loginwaitpanel">
						<img src="img/spinner.gif" width="75" height="75"/>
						<p>Please wait...</p>
					</div>
				</div>
			</div>
    	</script>
    	
    	<script id="screen_locations" type="text/x-page">

    	</script>
    	
    	<script id="screen_details" type="text/x-page">
			<div class="heading">
		    	<div class="ibar">
		    		<div class="left"><button class="ibtn left" id="detail_cancel" data-bind="click: $root.cancel">Cancel</button></div>
		    		<div class="title">PO Details</div>
		    	</div>
		    </div>
    		<div id="details" data-bind="with: $root.currentPo">
				<div class="podata">
					<section>
						<div class="ponum"><span class="value" data-bind="text: number"></span></div>
						<div class="location" data-bind="with: $root.currentLocation">
							<span class="name">Location:</span>
							<div class="value">
								<div class="locname" data-bind="text: name"></div>
								<div class="locaddr" data-bind="text: address"></div>
							</div>
						</div>
					</section>
					<section>
						<div class="servicetype"><span class="name">Contract Type:</span> <span class="value" data-bind="text: serviceType"></span></div>
					</section>
					<section>
						<div class="section notes"><span class="name">Scope:</span> <div class="value" data-bind="text: scope"></span></div>
					</section>
				</div>
				<div class="actions">
					<div data-bind="ifnot: status() == 'closed'">
						<div class="slider" id="checkinout" data-left="slide to check out" data-right="slide to check in" data-direction="reverse"></div>
					</div>
					<button id="takepictures" data-bind="click: $root.takePic">Take Pictures</button>
					<button id="addnote" data-bind="click: $root.addNote">Add Note</button>
				</div>
				<div id="noteform">
					<div class="note">
						<label for="notebox" class="caption">Note for <span data-bind="text: number">this PO</span></p>
						<textarea id="notebox"></textarea>
					</div>
					<div class="actions">
						<button id="cancelnote" data-bind="click: $root.cancelNote">Cancel</button>
						<button id="sendnote" data-bind="click: $root.sendNote">Send</button>
					</div>
				</div>
        	</div>
    	</script>
    	
    	<script id="screen_checkedin" type="text/x-page">
	    	<div class="ibar">
	    		<div class="left"><button class="ibtn left" id="detail_cancel" data-bind="click: $root.cancel">Cancel</button></div>
	    		<div class="title">Check Out</div>
	    	</div>
    		<div id="details" data-bind="with: $root.currentPo">
				<div class="podata">
					<section>
						<div class="ponum"><span class="name">PO:</span><span class="value" data-bind="text: number"></span></div>
						<div class="location" data-bind="with: $root.currentLocation">
							<span class="name">Location:</span>
							<div class="value">
								<div class="locname" data-bind="text: name"></div>
								<div class="locaddr" data-bind="text: address"></div>
							</div>
						</div>
					</section>
				</div>
				<div class="actions">
					<button class="bigbtn jobcomplete" data-bind="click: $root.completeJob">CHECK OUT<br/>(job complete)</button>
					<button class="bigbtn incomplete" data-bind="click: $root.incompleteJob">CHECK OUT<br/>(requires authentication)</button>
					<button class="bigbtn incomplete" data-bind="click: $root.incompleteJob">CHECK OUT<br/>(follow up required)</button>
					<button class="bigbtn contact" data-bind="click: $root.contactCustomerService">CALL<br/>CUSTOMER SERVICE</button>
				</div>
        	</div>
    	</script>
    	
    	<script id="screen_polist" type="text/x-handlebars-template">
			<div data-bind="with: currentLocation">
    			<div id="polist" class="list" data-bind="foreach: pos">
					<div class="record porecord" data-bind="css: status(), click: $root.selectPo">
						<div class="indicators"></div>
						<div class="po"><span class="number" data-bind="text: number"></span></div>
    					<div class="type" data-bind="text: serviceType"></div>
    					<div class="due"><span class="name">due:</span> <span class="value" data-bind="text: moment(Date(followUpBy)).format('MM/DD')"></span></div>
						<div class="rtarrow"></div>
					</div>
    			</div>
    			<div id="heading">
		    		<div class="ibar">
    					<div class="left"><button class="ibtn left" id="polist_cancel" data-bind="click: $root.cancel">Cancel</button></div>
    					<div class="title">Select PO</div>
    				</div>
					<div class="location" data-bind="with: $root.currentLocation">
						<div class="value">
							<div class="locname" data-bind="text: name"></div>
							<div class="locaddr" data-bind="text: address"></div>
						</div>
					</div>
    			</div>
			</div>
    	</script>
    	
    	<script id="po_record" type="text/x-handlebars-template">
    	</script>
    	
        <script type="text/javascript" src="cordova-2.7.0.js"></script>
    	<script type="text/javascript" src="js/index.js"></script>
    </body>
</html>
